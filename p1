pre_tasks:
  - set_fact:
      python_version: >-
        {{ 'rhel7-python3.8.18' if ansible_facts['distribution_major_version']=='7'
           else 'rhel8-python3.8.13' }}
  - include_vars: "vars/eap_swidtag_{{ python_version }}.yml"

tasks:
  - include_role:
      name: cloudera_redhat_python   # your consolidated role
    vars:
      repo_pkg: "{{ 'python36' if ansible_facts['distribution_major_version']=='7' else 'python3' }}"
